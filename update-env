#!/bin/bash
# reconfigure QuickJava package
# Emanuele Paiano - nixw0rm@gmail.com

dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

qjroot=$dir/

chmod +x $dir/script/*
chmod +x $dir/tools/*

echo > $qjroot/conf/global.cfg

. $qjroot/conf/config.cfg

cat<<__EOF__>>$qjroot/conf/global.cfg
# QuickJava environment config file

qjroot=$qjroot

__EOF__

if [ -r $qjroot/conf/global.cfg ]
then
	echo "Created conf/global.cfg"
else
	echo "error while creating global.cfg. Abort"
fi

echo >$qjroot/conf/make.hd

cat<<__EOF__>>$qjroot/conf/make.hd
# QuickJava Source makefile for Unix environment
# generated by update-env - for settings edit config.cfg

# Quickjava root directory
QJ_ROOT=$qjroot

# Quickjava workspace directory
WORKSPACE=$WORKSPACE

# Java Runtime path
JRE_PATH=$JRE_PATH

# Java SDK path
JDK_PATH=$JDK_PATH

# Jar Path
JAR_PATH=$JAR_PATH

# java source generated by jtiny path
SRC=$JSRC

# Path astyle formatter
FPATH=$qjroot/tools/

__EOF__

if [ -r $qjroot/conf/make.hd ]
then
	echo "Created conf/make.hd"
else
	echo "error while creating make.hd. Abort"
fi

$dir/script/createmk
